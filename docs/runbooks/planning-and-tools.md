# Планирование и инструменты (в связке с агентом)

Краткий обзор: как вести план, менять приоритеты и следить за прогрессом в контексте VoiceForge, чтобы и ты, и агент (Cursor) могли им пользоваться.

---

## Вариант 1: Markdown-файл в репо (backlog / план)

**Идея:** Один файл в репозитории (например `docs/runbooks/backlog.md` или `docs/PLAN.md`) — список задач с чекбоксами и приоритетами. Агент его **читает и правит** по твоей просьбе; ты видишь прогресс в git и в IDE.

**Плюсы:**
- Агент всегда в контексте: может обновлять «сделано», добавлять задачи, переставлять порядок по твоей команде.
- Версионирование: история в git.
- Нет внешних сервисов, всё в одном месте с кодом.

**Минусы:**
- Нет drag-and-drop; смена порядка — правка текста (или «переставь пункты 3 и 5» агенту).
- Нет напоминаний/дедлайнов из коробки.

**Пример структуры `docs/runbooks/backlog.md`:**
```markdown
# Backlog (обновляется вручную и агентом)

## В работе
- [x] CalDAV: опрос по calendar-integration.md (keyring caldav_*) — voiceforge calendar poll

## Далее (приоритет по порядку)
- [ ] Сборка AppImage в toolbox
- [ ] Runbook на EN: dependabot-review
- [ ] RAG ODT/RTF: тесты при добавлении

## Сделано (не удалять — история в docs/history/)
- [x] Sonar S3776
- [x] runbooks/en/ (desktop-build-deps, installation-guide, quickstart, bootstrap, dependabot-review, telegram-bot-setup)
```

**Как использовать со мной:** в чате: «добавь в backlog задачу X», «отметь CalDAV сделанным и перенеси в раздел Сделано», «подними AppImage выше CalDAV». Я буду править этот файл и при необходимости обновлять `next-iteration-focus.md`.

---

## Вариант 2: GitHub Projects (канбан по issues)

**Идея:** Репозиторий уже на GitHub. Включить **Projects** (Projects → Board или Table), завести колонки типа «Backlog» / «In progress» / «Done» и карточки — привязанные к **issues**. Агент может не только делать код и `Closes #N`, но и **управлять канбаном** через GitHub CLI, если выдать токену scope `project`.

**Плюсы:**
- Наглядно: доска, порядок карточек, статусы.
- Удобно перетаскивать и менять приоритет (ты или агент).
- Связь с кодом: в коммитах `Closes #12`; агент может создавать issues, добавлять их в проект и двигать по колонкам.

**Что агент может через `gh` (в терминале):**
- **Issues:** всегда (токен с доступом к repo): `gh issue create`, `gh issue list`, `gh issue close` — создание, список, закрытие.
- **Projects (канбан):** создание проекта, добавление issue в проект, смена поля Status (движение карточки по колонкам), список проектов и item’ов — **только если у токена есть scope `project`**. По умолчанию он не выдан.

**Один раз включить управление Projects агентом:** выполнить в терминале (keyring попросит подтвердить):
```bash
gh auth refresh -s project
```
После этого агент сможет по твоей просьбе: создать проект, создать issue, добавить issue в проект (`gh project item-add`), перевести карточку в другую колонку (`gh project item-edit` с полем Status). Примеры: «создай issue на CalDAV и добавь в проект», «перенеси #17 в Done».

**Как использовать со мной:** в чате: «создай issue на задачу X и добавь в проект VoiceForge», «возьми issue #17 и сделай», «отметь #17 как Done на доске». Я делаю код, коммит с `Closes #17`, при необходимости правлю карточку на доске через `gh project item-edit`.

---

## Что выбрать

| Критерий | Markdown backlog в репо | GitHub Projects |
|----------|-------------------------|------------------|
| Агент сам правит план | Да | Да (через `gh` при scope `project`) |
| Ты визуально двигаешь задачи | Нет (или через агента) | Да (или агент через `gh project item-edit`) |
| Всё в репо, без внешнего сервиса | Да | Нет (GitHub) |
| Связь коммит ↔ задача | Вручную в сообщении коммита | `Closes #N` автоматически |

**Рекомендация:** если хочешь канбан и чтобы агент им управлял — один раз выполни `gh auth refresh -s project`, создай проект в репо (или попроси агента создать через `gh project create`). Дальше агент может создавать issues, добавлять в проект и двигать карточки по колонкам. Markdown-backlog по-прежнему удобен как дублирующий список в репо без зависимости от GitHub UI.

**Текущий проект VoiceForge:** [GitHub Project #1](https://github.com/users/iurii-izman/projects/1) — привязан к репо `iurii-izman/voiceforge`. Колонки Status: Todo, In Progress, Done. Открытые задачи оформлены issues #26–30 и добавлены на доску.

---

## Связь с текущими документами

- **Текущий фокус и «следующий шаг»:** по-прежнему в [next-iteration-focus.md](next-iteration-focus.md) — агент обновляет в конце сессии.
- **Всё сделанное (аудит по коду):** [docs/history/closed-plans-and-roadmap.md](../history/closed-plans-and-roadmap.md).
- **Приоритет фич (roadmap 1–20):** [roadmap-priority.md](../roadmap-priority.md) — не заменяется backlog’ом, а дополняет его порядком приоритетов.

При появлении `backlog.md` или решении вести план в GitHub Projects — добавь это в [DOCS-INDEX.md](../DOCS-INDEX.md) и при желании одну строку в agent-context (где смотреть план).
